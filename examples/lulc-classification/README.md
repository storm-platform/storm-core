
<!-- README.md is generated from README.Rmd. Please edit that file -->

## Land Use and Land Cover classification

In this example,
[bdcrrm-cli](https://github.com/brazil-data-cube/bdcrrm-cli/) is used
for the reproducible production of Land Use and Land Cover maps using
the R programming language and the [SITS analytical
package](https://github.com/e-sensing/sits).

### Usage

The `bdcrrm-cli` is a tool that allows you to create reproducible
results. The reproducibility guarantee made by the tool occurs during
the production of the results. For this, the tool creates directed
acyclic graphs (DAG) that register the execution steps of the search
scripts.

> The definition of the link between each step is done based on the
> inputs and outputs generated by the scripts.

To start using it, you must first create an analysis project:

``` shell
bdcrrm-cli project init
```

The above command will create the project, following the definitions
made by the user. For this example, the project is already created, and
its definition files can be found in the `.bdcrrm` directory.

> The `.bdcrrm` directory is the default, and every bdcrrm project needs
> this file.

To check out general information about the project, you can use it:

``` shell
bdcrrm-cli project show
```

With this file created, it is possible to generate reproducible results.
This is done by running scripts through `bdcrrm`:

``` shell
bdcrrm-cli execution produce "COMMAND TO EXECUTE THE SCRIPTS"
```

As stated in this example, we will use code in the R programming
language with the SITS package. The script files are available in the
`R` directory.

> The execution of this code depends on the Brazil Data Cube data access
> services. Therefore, it is necessary to set the environment variable
> `BDC_ACCESS_KEY` with the access key.

``` shell
export BDC_ACCESS_KEY=YOUR_ACCESS_TOKEN_HERE
```

Once this is set, we can execute the code:

``` shell
#
# Extract the Time Series
#
bdcrrm-cli execution produce 'Rscript R/01_extract_ts.R'

#
# Classify the Data Cube rasters
#
bdcrrm-cli execution produce 'Rscript R/02_classify.R'
```

With this, each of the steps have been recorded, allowing these steps to
be re-executed or even shared with others for re-execution.

For sharing, you can use the command:

``` shell
bdcrrm-cli project export --output-dir lulc-project
```

In the directory created will be a zip file with all the elements needed
for the reproduction. To use the exported file, you can import the
project and then run it:

``` shell
bdcrrm-cli project import -f lulc-project/bdcrrm-lulc-classification.zip -d imported_project

cd imported_project && ./reproduce.sh
```
